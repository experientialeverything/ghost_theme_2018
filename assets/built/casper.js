!function(r){"use strict";r.fn.fitVids=function(e){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("div");n.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(n.childNodes[1])}return e&&r.extend(i,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&e.push(i.customSelector);var n=".fitvidsignore";i.ignore&&(n=n+", "+i.ignore);var t=r(this).find(e.join(","));(t=(t=t.not("object object")).not(n)).each(function(){var e=r(this);if(!(0<e.parents(n).length||"embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var t=("object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height())/(isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10));if(!e.attr("name")){var i="fitvid"+r.fn.fitVids._count;e.attr("name",i),r.fn.fitVids._count++}e.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*t+"%"),e.removeAttr("height").removeAttr("width")}})})},r.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(e){e.addEventListener("DOMContentLoaded",function(){e.querySelectorAll(".kg-gallery-image img").forEach(function(e){var t=e.closest(".kg-gallery-image"),i=e.attributes.width.value/e.attributes.height.value;t.style.flex=i+" 1 0%"})})}((window,document)),function(t,i){var n=i.querySelector("link[rel=next]");if(n){var r=i.querySelector(".post-feed");if(r){var o=300,a=!1,d=!1,s=t.scrollY,c=t.innerHeight,l=i.documentElement.scrollHeight;t.addEventListener("scroll",f,{passive:!0}),t.addEventListener("resize",v),u()}}function h(){if(404===this.status)return t.removeEventListener("scroll",f),void t.removeEventListener("resize",v);this.response.querySelectorAll(".post-card").forEach(function(e){r.appendChild(i.importNode(e,!0))});var e=this.response.querySelector("link[rel=next]");e?n.href=e.href:(t.removeEventListener("scroll",f),t.removeEventListener("resize",v)),l=i.documentElement.scrollHeight,d=a=!1}function e(){if(!d)if(s+c<=l-o)a=!1;else{d=!0;var e=new t.XMLHttpRequest;e.responseType="document",e.addEventListener("load",h),e.open("GET",n.href),e.send(null)}}function u(){a||t.requestAnimationFrame(e),a=!0}function f(){s=t.scrollY,u()}function v(){c=t.innerHeight,l=i.documentElement.scrollHeight,u()}}(window,document),$(function(t){var i=1,n=window.location.pathname,r=t(document),o=t(".post-feed"),a=100,d=!1,s=!1,c=window.scrollY,l=window.innerHeight,h=r.height();function u(){c=window.scrollY,e()}function f(){l=window.innerHeight,h=r.height(),e()}function e(){d||requestAnimationFrame(v),d=!0}function v(){if(!s)if(c+l<=h-a)d=!1;else if(i!==maxPages){s=!0;var e=n+"page/"+ ++i+"/";t.get(e,function(e){o.append(t(e).find(".post").hide().fadeIn(100))}).fail(function(e){404===e.status&&(window.removeEventListener("scroll",u,{passive:!0}),window.removeEventListener("resize",f))}).always(function(){h=r.height(),d=s=!1})}}n=n.replace(/#(.*)$/g,"").replace("///g","/"),window.addEventListener("scroll",u,{passive:!0}),window.addEventListener("resize",f),v()}),function(r){"use strict";r.fn.fitVids=function(e){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("div");n.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(n.childNodes[1])}return e&&r.extend(i,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&e.push(i.customSelector);var n=".fitvidsignore";i.ignore&&(n=n+", "+i.ignore);var t=r(this).find(e.join(","));(t=(t=t.not("object object")).not(n)).each(function(){var e=r(this);if(!(0<e.parents(n).length||"embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var t=("object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height())/(isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10));if(!e.attr("name")){var i="fitvid"+r.fn.fitVids._count;e.attr("name",i),r.fn.fitVids._count++}e.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*t+"%"),e.removeAttr("height").removeAttr("width")}})})},r.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(a,d){a.Casper||(a.Casper={}),a.Casper.stickyNavTitle=function(e){var t=d.querySelector(e.navSelector),i=d.querySelector(e.titleSelector),n=a.scrollY,r=!1;function o(){i.getBoundingClientRect().top+a.scrollY+(i.offsetHeight+35)<=n?t.classList.add(e.activeClass):t.classList.remove(e.activeClass),r=!1}a.addEventListener("scroll",function(){n=a.scrollY,function(){r||requestAnimationFrame(o);r=!0}()},{passive:!0}),o()}}(window,document);
//# sourceMappingURL=casper.js.map